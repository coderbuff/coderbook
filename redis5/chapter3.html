<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>命令 | CoderBook</title>
    <meta name="description" content="CoderBook">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/coderbook/assets/css/0.styles.b2da8d00.css" as="style"><link rel="preload" href="/coderbook/assets/js/app.bd0e8773.js" as="script"><link rel="preload" href="/coderbook/assets/js/2.2e9b2f22.js" as="script"><link rel="preload" href="/coderbook/assets/js/22.a5802306.js" as="script"><link rel="prefetch" href="/coderbook/assets/js/10.6f377ed6.js"><link rel="prefetch" href="/coderbook/assets/js/11.f34c1c50.js"><link rel="prefetch" href="/coderbook/assets/js/12.d8b974da.js"><link rel="prefetch" href="/coderbook/assets/js/13.4f10c2cc.js"><link rel="prefetch" href="/coderbook/assets/js/14.07641015.js"><link rel="prefetch" href="/coderbook/assets/js/15.11341f4e.js"><link rel="prefetch" href="/coderbook/assets/js/16.a1027f62.js"><link rel="prefetch" href="/coderbook/assets/js/17.b0b7317a.js"><link rel="prefetch" href="/coderbook/assets/js/18.42995780.js"><link rel="prefetch" href="/coderbook/assets/js/19.e405f35e.js"><link rel="prefetch" href="/coderbook/assets/js/20.f13e781b.js"><link rel="prefetch" href="/coderbook/assets/js/21.ecee6efb.js"><link rel="prefetch" href="/coderbook/assets/js/23.d28e9e5c.js"><link rel="prefetch" href="/coderbook/assets/js/24.0abc3809.js"><link rel="prefetch" href="/coderbook/assets/js/25.6a2ddf93.js"><link rel="prefetch" href="/coderbook/assets/js/26.4c465923.js"><link rel="prefetch" href="/coderbook/assets/js/27.7b30b08b.js"><link rel="prefetch" href="/coderbook/assets/js/28.24baedb4.js"><link rel="prefetch" href="/coderbook/assets/js/29.f282ec3c.js"><link rel="prefetch" href="/coderbook/assets/js/3.d038ebcd.js"><link rel="prefetch" href="/coderbook/assets/js/30.f7e309d4.js"><link rel="prefetch" href="/coderbook/assets/js/4.9132518f.js"><link rel="prefetch" href="/coderbook/assets/js/5.8cde2cb8.js"><link rel="prefetch" href="/coderbook/assets/js/6.cf9f53d9.js"><link rel="prefetch" href="/coderbook/assets/js/7.a256c028.js"><link rel="prefetch" href="/coderbook/assets/js/8.2227699c.js"><link rel="prefetch" href="/coderbook/assets/js/9.fbfe90ec.js">
    <link rel="stylesheet" href="/coderbook/assets/css/0.styles.b2da8d00.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/coderbook/" class="home-link router-link-active"><!----> <span class="site-name">CoderBook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/coderbook/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/coderbook/es6/index.html" class="nav-link">
  ElasticSearch6.x
</a></div><div class="nav-item"><a href="/coderbook/redis5/index.html" class="nav-link">
  Redis5.x
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/coderbook/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/coderbook/es6/index.html" class="nav-link">
  ElasticSearch6.x
</a></div><div class="nav-item"><a href="/coderbook/redis5/index.html" class="nav-link">
  Redis5.x
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/coderbook/redis5/" class="sidebar-link">写在前面的话</a></li><li><a href="/coderbook/redis5/chapter1.html" class="sidebar-link">准备工作</a></li><li><a href="/coderbook/redis5/chapter2.html" class="sidebar-link">数据类型</a></li><li><a href="/coderbook/redis5/chapter3.html" class="active sidebar-link">命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coderbook/redis5/chapter3.html#字符串（string）" class="sidebar-link">字符串（string）</a></li><li class="sidebar-sub-header"><a href="/coderbook/redis5/chapter3.html#列表（list）" class="sidebar-link">列表（list）</a></li><li class="sidebar-sub-header"><a href="/coderbook/redis5/chapter3.html#哈希（hash）" class="sidebar-link">哈希（hash）</a></li><li class="sidebar-sub-header"><a href="/coderbook/redis5/chapter3.html#集合（set）" class="sidebar-link">集合（set）</a></li><li class="sidebar-sub-header"><a href="/coderbook/redis5/chapter3.html#有序集合（zset）" class="sidebar-link">有序集合（zset）</a></li></ul></li><li><a href="/coderbook/redis5/chapter4.html" class="sidebar-link">配置</a></li><li><a href="/coderbook/redis5/chapter5.html" class="sidebar-link">Java客户端（上）</a></li><li><a href="/coderbook/redis5/chapter6.html" class="sidebar-link">事务</a></li><li><a href="/coderbook/redis5/chapter7.html" class="sidebar-link">分布式锁</a></li><li><a href="/coderbook/redis5/chapter8.html" class="sidebar-link">Java客户端（下）</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="命令"><a href="#命令" class="header-anchor">#</a> 命令</h1> <p>按照<strong>第一章 准备工作</strong>中的步骤，我们通过<code>redis-cli</code>命令进入redis命令行交互。</p> <p>本章节将围绕上一章节的数据类型，针对不同的数据类型操作不同的Redis命令。</p> <h2 id="字符串（string）"><a href="#字符串（string）" class="header-anchor">#</a> 字符串（string）</h2> <h3 id="读-写-删简单命令"><a href="#读-写-删简单命令" class="header-anchor">#</a> 读/写/删简单命令</h3> <p>写命令通过<code>set</code>关键字实现，<code>set [key] [value]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; set hello world
OK
</code></pre></div><p>读命令通过<code>get</code>关键字实现，<code>get [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; get hello
&quot;world&quot;
</code></pre></div><p>删除命令通过<code>del</code>关键字实现（删除命令可以适用于所有的数据类型），<code>del [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; del hello
(integer) 1
</code></pre></div><p>字符串数据类型还有一个<code>mset</code>表示同时写入一个或多个字符串值，<code>mset [key1] [value1] [key2] [value2]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; mset key1 value1 key2 value2
OK
</code></pre></div><h3 id="自增-自减命令"><a href="#自增-自减命令" class="header-anchor">#</a> 自增/自减命令</h3> <p>自增+1命令通过<code>incr</code>关键字实现，<code>incr [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; set hello 1				#写入key为hello的值为1
OK
127.0.0.1:6379&gt; get hello					#读取key为hello的值
&quot;1&quot;
127.0.0.1:6379&gt; incr hello				#将key为hello的值自增+1
(integer) 2
127.0.0.1:6379&gt; get hello					#读取key为hello的值
&quot;2&quot;
</code></pre></div><p>自减-1命令通过<code>decr</code>关键字实现，<code>decr [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; set world 1				#写入key为world的值为1
OK
127.0.0.1:6379&gt; get world					#读取key为world的值
&quot;1&quot;
127.0.0.1:6379&gt; decr world				#将key为world的值自减-1
(integer) 0
127.0.0.1:6379&gt; get world					#读取key为world的值
&quot;0&quot;
</code></pre></div><p>自增<strong>任意整数</strong>通过<code>incrby</code>实现，<code>incrby [key] [number]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; set coderbuff 1		#写入key为coderbuff的值为1
OK
127.0.0.1:6379&gt; get coderbuff			#读取key为coderbuff的值
&quot;1&quot;
127.0.0.1:6379&gt; incrby coderbuff 10	#将key为coderbuff的值自增+10
(integer) 11
127.0.0.1:6379&gt; get coderbuff			#读取key为coderbuff的值
&quot;11&quot;
</code></pre></div><p>自减<strong>任意整数</strong>通过<code>decrby</code>实现，<code>decrby [key] [number]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; set coderbook 1		#写入key为coderbook的值为1
OK
127.0.0.1:6379&gt; get coderbook			#读取key为coderbook的值
&quot;1&quot;
127.0.0.1:6379&gt; decrby coderbook 10		#将key为coderbook的值自增-10
(integer) -9
127.0.0.1:6379&gt; get coderbook			#读取key为coderbook的值
&quot;-9&quot;
</code></pre></div><p>自增<strong>任意浮点数</strong>通过<code>incrbyfloat</code>，<code>incrbyfloat [key] [float]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; set coderchat 1		#写入key为coderchat的值为1
OK
127.0.0.1:6379&gt; get coderchat			#读取key为coderchat的值
&quot;1&quot;
127.0.0.1:6379&gt; incrbyfloat coderchat 1.1		#将key为coderchat的值自增+1.1
&quot;2.1&quot;
127.0.0.1:6379&gt; get coderchat			#读取key为coderchat的值
&quot;2.1&quot;
</code></pre></div><h3 id="字符串操作命令"><a href="#字符串操作命令" class="header-anchor">#</a> 字符串操作命令</h3> <p>redis中对字符串类型的数据类型不仅可以使用上述命令，它甚至还能像Java一样进行值得追加、获取子串等。</p> <p><strong>追加value值给指定key到末尾</strong>通过<code>append</code>，<code>apppend [key] [append_string]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; set say hello		#写入key为say的值为hello
OK
127.0.0.1:6379&gt; get say					#读取key为say的值
&quot;hello&quot;
127.0.0.1:6379&gt; append say world		#在key为say的value值末尾追加world
(integer) 10										#返回key当前value值得长度
127.0.0.1:6379&gt; get say					#读取key为say的值
&quot;helloworld&quot;
</code></pre></div><p>接着这个示例，通过命令<code>getrange</code><strong>获取子字符串</strong>，<code>getrange [key] [start] [end]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; getrange say 1 10		#获取位于位置1到10的子字符串
&quot;elloworld&quot;
127.0.0.1:6379&gt; get say							#可以看到，尽管我们上面获取了子字符串，但并未修改原字符串
&quot;helloworld&quot;
</code></pre></div><p>同样是这个示例，我们通过命令<code>setrange</code><strong>替换子字符串为给定值</strong>，我们会给出两个关键参数，第一个参数是[start]表示从哪里开始替换，第二个参数是[value]表示替换的内容，<code>setrange [key] [start] [value]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; setrange say 1 i
(integer) 10
127.0.0.1:6379&gt; get say
&quot;hilloworld&quot;
</code></pre></div><h3 id="二进制位命令"><a href="#二进制位命令" class="header-anchor">#</a> 二进制位命令</h3> <p>任何数据在操作系统中都是以<strong>二进制位</strong>形式存储的，字符串类型中redis提供了对其进行二进制位操作。通常情况下运用可能不多，但可以通过它实现一些“巧妙”的设计。</p> <p><strong>例如，在钉钉消息中，我们发送一条消息会显示“已读”和“未读”的人，我们需要将这两个信息存储在redis中，应该怎么设计？</strong></p> <p>我们设计一条消息的key值结构为“[user_id]:[msg_id]”，所以key=“1:100”就表示“用户ID为1发送的消息ID为100”。<strong>注意</strong>，此时如果用户ID=2的人读了这条消息，就通过命令<code>setbit 1:100 2 1</code>写入，如果用户ID=100的人读了这条消息，就通过<code>setbit 1:100 10 1</code>。这条命令的含义表示对key=1:100的二进制第2位写入1，对key=1:100的二进制第10位写入1，1表示已读，0则表示未读。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; set 1:100 0					#定义key=1:100，表示用户ID为1发出的消息ID为100的消息
OK
127.0.0.1:6379&gt; setbit 1:100 0 0		#初始化1:100的第0位到第10位的二进制为0，表示刚发出来都是未读。
(integer) 0
127.0.0.1:6379&gt; setbit 1:100 1 0
(integer) 0
127.0.0.1:6379&gt; setbit 1:100 2 0
(integer) 1
127.0.0.1:6379&gt; setbit 1:100 3 0
(integer) 1
127.0.0.1:6379&gt; setbit 1:100 4 0
(integer) 0
127.0.0.1:6379&gt; setbit 1:100 5 0
(integer) 0
127.0.0.1:6379&gt; setbit 1:100 6 0
(integer) 0
127.0.0.1:6379&gt; setbit 1:100 7 0
(integer) 0
127.0.0.1:6379&gt; setbit 1:100 8 0
(integer) 0
127.0.0.1:6379&gt; setbit 1:100 9 0
(integer) 0
127.0.0.1:6379&gt; setbit 1:100 10 0
</code></pre></div><p>上面我们就初始化好了一个bitmap（位图）。接下来，当用户ID=2和用户ID=10读了这条消息。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; setbit 1:100 1 1		#实际上，发出消息的同时，自己也已读了
(integer) 0
127.0.0.1:6379&gt; setbit 1:100 2 1		#用户ID=2读了这条消息
(integer) 0
127.0.0.1:6379&gt; setbit 1:100 10 1		#用户ID=10读了这条消息
(integer) 0
</code></pre></div><p>我们通过<code>getbit</code>命令可以判断出哪些用户是否已读这条消息，例如，我们判断用户ID=3是否已读这条消息。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; getbit 1:100 3		#读取key为1:100的二进制位第3位二进制值
(integer) 0												#返回0，表示未读
</code></pre></div><p>判断用户ID=10是否已读这条消息。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; getbit 1:100 10		#读取key为1:100的二进制位第10位二进制值
(integer) 1												#返回1，表示已读
</code></pre></div><p>我们还可以通过<code>bitcount</code>统计值为1的数量，也就是有多少人已读这条消息。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; bitcount 1:100		#统计二进制位为1的数量
(integer) 3												#只有3个，和我们上面的假定一致，用户自己（用户ID=1）和用户ID=2、用户ID=10的用户读了这条消息
</code></pre></div><p>最后还有一个关于二进制位的命令<code>bittop [operation] [result] [key1] [key2]</code>，可以对多个key值的二进制位进行二进制运算，包括<code>并AND</code>、<code>或OR</code>、<code>异或XOR</code>、<code>非NOT</code>，计算结果保存在[result]中。</p> <h2 id="列表（list）"><a href="#列表（list）" class="header-anchor">#</a> 列表（list）</h2> <h3 id="推入-弹出常用命令"><a href="#推入-弹出常用命令" class="header-anchor">#</a> 推入/弹出常用命令</h3> <p>通过<code>rpush</code>、<code>lpush</code>，将一个或多个值向右或向左推入。</p> <p><code>rpush [key] [value1] [value2]</code>，将value值推入到列表的<strong>右端</strong>。</p> <p><code>lpush [key] [value1] [value2]</code>，将value值推入到列表的<strong>左端</strong>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; rpush books java		#向列表key值为books的右侧推入value值java
(integer) 1
127.0.0.1:6379&gt; lpush books c				#向列表key值为books的左侧推入value值c
(integer) 2
127.0.0.1:6379&gt; rpush books python	#向列表key值为books的右侧推入value值python
(integer) 3
127.0.0.1:6379&gt; lrange books 0 -1		#查看列表key值为books的值
1) &quot;c&quot;
2) &quot;java&quot;
3) &quot;python&quot;
</code></pre></div><p>接着上面的示例，通过<code>rpop</code>、<code>lpop</code>，移除并返回列表中最后端、最左端的元素。</p> <p><code>rpop [key]</code>，移除列表最后端的元素。</p> <p><code>lpop [key]</code>，移除列表最左端的元素。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; rpop books					#移除列表key值为books最右端的元素并返回
&quot;python&quot;
127.0.0.1:6379&gt; lrange books 0 -1		#查看列表key为books的所有元素
1) &quot;c&quot;
2) &quot;java&quot;
127.0.0.1:6379&gt; lpop books					#移除列表key值为books最左端的元素并返回
&quot;c&quot;
127.0.0.1:6379&gt; lrange books 0 -1		#查看列表key为books的所有元素
1) &quot;java&quot;
</code></pre></div><p>在介绍完推入和弹出命令后，接下来将介绍与<strong>列表范围</strong>查看的命令。</p> <p><code>lrange [key] [start] [end]</code>命令用于返回列表从[start]到[end]位置范围内的所有元素，注意，位于[start]、[end]的元素也会被返回，上面的例子已经出现过该命令。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; rpush level A B C D			#对列表key为level的右侧连续推入value：A B C D
(integer) 4
127.0.0.1:6379&gt; lrange level 0 1				#返回key为level的位置0~1的元素
1) &quot;A&quot;
2) &quot;B&quot;
127.0.0.1:6379&gt; lrange level 0 -1				#查看列表key为level的所有元素
1) &quot;A&quot;
2) &quot;B&quot;
2) &quot;C&quot;
2) &quot;D&quot;
</code></pre></div><p><code>lindex [key] [index]</code>命令用于返回指定位置[index]的元素，仍然使用上述示例。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; lindex level 3
&quot;D&quot;
</code></pre></div><p><code>lrange</code>和<code>lindex</code>均不会修改原本的列表值，但<code>ltrim</code>则用于“修建”列表值。</p> <p><code>ltrim [key] [start] [end]</code>表示只保留列表从[start]到[end]范围的所有元素，注意，包含位于[start]、[end]的元素，同样采用上述示例。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; lrange level 0 -1		#查看列表key为level的所有元素
1) &quot;A&quot;
2) &quot;B&quot;
2) &quot;C&quot;
2) &quot;D&quot;
127.0.0.1:6379&gt; ltrim level 1 2			#保留列表位置为1~2的元素
OK
127.0.0.1:6379&gt; lrange level 0 -1		#查看列表key为level的所有元素
1) &quot;B&quot;
2) &quot;C&quot;
</code></pre></div><p>列表基本的命令就是上面这些，还有一些比较“高级”的命令：将元素从一个队列移动到另外一个队列，或者阻塞式的执行弹出命令知道有新元素新加入到列表中。在这里就不再介绍，后面章节在介绍到redis的一些应用时再讲。</p> <h2 id="哈希（hash）"><a href="#哈希（hash）" class="header-anchor">#</a> 哈希（hash）</h2> <p><code>hmset</code>命令可写入hash类型的值，<code>hmset [key] [field1] [value1] [field2] [value2]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; hmset okevin name kevin sex male
OK
</code></pre></div><p><code>hmget</code>命令可读取hash类型的值，<code>hmget [key] [field]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; hmget okevin name
1) &quot;kevin&quot;
</code></pre></div><p><code>hlen</code>返回hash包含的键值对数量，<code>hlen [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; hlen okevin
(integer) 2
</code></pre></div><p><code>hmgetall</code>返回hash包含的所有键值对，<code>hmgetall [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; hgetall okevin		#返回所有的键值对，奇数列为field，偶数列为value
1) &quot;name&quot;
2) &quot;kevin&quot;
3) &quot;sex&quot;
4) &quot;male&quot;
</code></pre></div><p><code>hexists</code>命令检查给定的field是否存在hash值中，返回0表示不存在，返回1表示存在，<code>hexists [key] [field]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; hexists okevin name
(integer) 1
127.0.0.1:6379&gt; hexists okevin age
(integer) 0
</code></pre></div><p><code>hkeys</code>获取hash包含的所有field键，<code>hkeys [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; hkeys okevin
1) &quot;name&quot;
2) &quot;sex&quot;
</code></pre></div><p><code>hvals</code>获取hash包含的所有field对应的value值，<code>hvals [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; hvals okevin
1) &quot;kevin&quot;
2) &quot;male&quot;
</code></pre></div><p><code>hincrby</code>给hash中指定的field键自增任意整数（和字符串类型的<code>incrby</code>类似），<code>hincrby [key] [field] [number]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; hmset okevin age 0				#新增“年龄”field值为0
OK
127.0.0.1:6379&gt; hmget okevin age					#获取“年龄”
1) &quot;0&quot;
127.0.0.1:6379&gt; hincrby okevin age 25			#给“年龄”field自增“25”整数
(integer) 25
127.0.0.1:6379&gt; hmget okevin age					#获取“年龄”
1) &quot;25&quot;
</code></pre></div><p><code>hincrbyfloat</code>给hash中指定的filed键自增任意浮点数（和字符串类型的<code>incrbyfloat</code>类似），<code>hincrbyfloat [key] [field] [number]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; hincrbyfloat okevin age 0.5
&quot;25.5&quot;
127.0.0.1:6379&gt; hmget okevin age
1) &quot;25.5&quot;
</code></pre></div><p><code>hdel</code>删除hash中指定的filed，<code>hmdel [key] [field]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; hgetall okevin
1) &quot;name&quot;
2) &quot;kevin&quot;
3) &quot;sex&quot;
4) &quot;male&quot;
5) &quot;age&quot;
6) &quot;25.5&quot;
127.0.0.1:6379&gt; hdel okevin age
(integer) 1
127.0.0.1:6379&gt; hgetall okevin
1) &quot;name&quot;
2) &quot;kevin&quot;
3) &quot;sex&quot;
4) &quot;male&quot;
</code></pre></div><h2 id="集合（set）"><a href="#集合（set）" class="header-anchor">#</a> 集合（set）</h2> <p>在上一章节讲到，集合（set）是以无序方式存储各不相同元素的数据类型。它和Java中的Set类型类似。它同样具有新增、删除、读取等基本操作，还有两个集合之间运算的操作。</p> <h3 id="读-写等常用命令"><a href="#读-写等常用命令" class="header-anchor">#</a> 读/写等常用命令</h3> <p><code>sadd</code>命令将一个或多个元素添加到集合里，并返回被添加元素中原本并不存在集合中的元素数量，<code>sadd [key] [member] [member]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; sadd students kevin yulinfeng
(integer) 2
</code></pre></div><p><code>sismember</code>命令检查元素是否存在集合中，返回1表示存在，返回0表示不存在，<code>sismember [key] [member]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; sismember students kevin
(integer) 1
127.0.0.1:6379&gt; sismember students linfeng
(integer) 0
</code></pre></div><p><code>smembers</code>命令返回集合中包含的所有元素，<code>smembers [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; smembers students
1) &quot;yulinfeng&quot;
2) &quot;kevin&quot;
</code></pre></div><p><code>scard</code>命令返回集合中元素的数量，<code>scards [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; scard students
(integer) 2
</code></pre></div><p><code>srandmember</code>命令从集合中随机返回一个或多个元素，当返回的元素数量设置为正数时，元素不会重复，当返回的元素数量设置为负数时，元素可能会重复，<code>srandmember [key] [count]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; srandmember students 1
1) &quot;yulinfeng&quot;
127.0.0.1:6379&gt; srandmember students 1
1) &quot;kevin&quot;
127.0.0.1:6379&gt; srandmember students 3
1) &quot;kevin&quot;
2) &quot;yulinfeng&quot;
127.0.0.1:6379&gt; srandmember students -3
1) &quot;yulinfeng&quot;
2) &quot;kevin&quot;
3) &quot;kevin&quot;
</code></pre></div><p><code>srem</code>命令从集合中移除一个或多个指定的元素，并返回被移除的元素数量，<code>srem [key] [member] [member]</code>。</p> <h3 id="多个集合命令"><a href="#多个集合命令" class="header-anchor">#</a> 多个集合命令</h3> <p>redis可以对多个集合进行操作，例如数学中的差集运算、交集运算等。下面只列举多个集合操作的命令，不再举例，但如果有场景运用时一定要知道redis还可以做多集合运算。</p> <p><code>sdiff [key1] [key2]……</code>命令返回存在于key1，但不存在于其他集合（key2）中的元素（差集运算）。</p> <p><code>sdiff [dest-key] [key1] [key2]……</code>命令也是同上的差集运算，但它将元素存储到dest-key键中。</p> <p><code>sinter [key1] [key2]……</code>命令返回同时存在所有集合（key1、key2）中的元素（交集运算）。</p> <p><code>sinterstore [dest-key] [key1] [key2]……</code>命令也是同上的交集运算，但它将元素存储到dest-key键中。</p> <p><code>sunion [key1] [key2]……</code>命令返回所有集合中（key1、key2）的元素（并集运算）。</p> <p><code>sunionstore [dest-key] [key1] [key2]……</code>命令也是同上的并集运算，但它将元素存储到dest-key键中。</p> <h2 id="有序集合（zset）"><a href="#有序集合（zset）" class="header-anchor">#</a> 有序集合（zset）</h2> <p>在上一章<strong>数据类型</strong>中，我们谈到尽管“有序集合”这种数据类型，更像是“集合”的有序版，但对于数据结构上讲，它更类似“哈希（hash）”。它同哈希类型一样，值也是k-v形式，不同的是有序集合的v代表的是用于排序的“分数”。</p> <h3 id="读-写等常用命令-2"><a href="#读-写等常用命令-2" class="header-anchor">#</a> 读/写等常用命令</h3> <p><code>zadd</code>用于有序集合的写入操作，<code>zadd [key] [score1] [member1] [score2] [member2]……</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; zadd sorted 2 a 3 b
(integer) 2
</code></pre></div><p><code>zcard</code>命令用于返回有序集合中的成员数量，<code>zcard [key]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; zcard sorted
(integer) 2
</code></pre></div><p><code>zrank</code>用于返回有序集合中成员member的排名（按分数从小到大排列），<code>zrank [key] [member]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; zrank sorted a
(integer) 0
127.0.0.1:6379&gt; zrank sorted b
(integer) 1
</code></pre></div><p><code>zrevrank</code>命令也是返回成员member的排名，但它和<code>zrank</code>排序规则相反，它是按分数从大到小排列，<code>zrevrank [key] [member]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; zrevrank sorted a
(integer) 1
127.0.0.1:6379&gt; zrevrank sorted b
(integer) 0
</code></pre></div><p><code>zscore</code>命令返回成员member的分数，<code>zscore [key] [member]</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; zscore sorted a
&quot;2&quot;
</code></pre></div><p><code>zrange [key] [start] [stop] (withscores)</code>命令用于返回有序集合中排名介于start和stop之间的成员（按分数从小到大排列），withscores参数可选表示是否返回分数，start和end指的是排在第几名，从0开始。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; zrange sorted 0 0 withscores
1) &quot;a&quot;
2) &quot;2&quot;
127.0.0.1:6379&gt; zrange sorted 0 1 withscores
1) &quot;a&quot;
2) &quot;2&quot;
3) &quot;b&quot;
4) &quot;3&quot;
</code></pre></div><p><code>zrevrange</code>同<code>zrange</code>类似，但它是按分数从大到小排列，<code>zrevrange [key] [start] [end] (withscores)</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; zrevrange sorted 0 0 withscores
1) &quot;b&quot;
2) &quot;3&quot;
127.0.0.1:6379&gt; zrevrange sorted 0 1 withscores
1) &quot;b&quot;
2) &quot;3&quot;
3) &quot;a&quot;
4) &quot;2&quot;
</code></pre></div><p><code>zcount [key] [min_score] [max_score]</code>返回分数介于min_score和max_score之间的成员数量。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; zcount sorted 0 2
(integer) 1
127.0.0.1:6379&gt; zcount sorted 0 3
(integer) 2
</code></pre></div><p><code>zincrby [key] [incrment] [member]</code>命令用于给member成员的分数加上incrment。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; zincrby sorted 2 a
&quot;4&quot;
</code></pre></div><p><code>zrem</code>命令用于删除有序集合中指定的成员，<code>zrem [key] [member1] [member2]……</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; zrem sorted a
(integer) 1
</code></pre></div><h3 id="多个有序集合命令"><a href="#多个有序集合命令" class="header-anchor">#</a> 多个有序集合命令</h3> <p>同集合一样，有序集合也可以做多个集合的操作，例如交集、并集等。</p> <p><code>zinterstore</code>用于交集运算。</p> <p><code>zunionstore</code>用于并集运算。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/coderbook/redis5/chapter2.html" class="prev">
        数据类型
      </a></span> <span class="next"><a href="/coderbook/redis5/chapter4.html">
        配置
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/coderbook/assets/js/app.bd0e8773.js" defer></script><script src="/coderbook/assets/js/2.2e9b2f22.js" defer></script><script src="/coderbook/assets/js/22.a5802306.js" defer></script>
  </body>
</html>
